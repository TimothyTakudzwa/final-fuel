{% extends "supplier/supplier_base.html" %}
{% load humanize %}

{% block body %}
<!-- Content Header (Page header) -->
<section class="content-header">
    <div class="header-icon">
      <i class="fa fa-user-circle-o" aria-hidden="true"></i>
    </div>
    <div class="header-title">
      <h1>Customers</h1>
    <small>{{client.buyer_company.name|title}}'s Activity</small>
      <ol class="breadcrumb hidden-xs">
          <li><a href="{%url 'fuel-request'%}"><i class="pe-7s-home"></i> Home</a></li>
          <li class="active">{{client.buyer_company.name|title}}</li>
      </ol>
    </div>
  </section>

  <section class="content">

    <!-- Client Stats -->

    <div class="row" style="margin-bottom: 50px;">
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-3">
            <div class="panel panel-bd cardbox" style="background-color: #843938;border: 1px solid #843938;">
                <div class="panel-body">
                  <div class="items pull-left">
                    <i class="fa fa-suitcase fa-2x"></i>
                    <h4>Contribution</h4>
                </div>
                
                    <div class="statistic-box">
                          <div class="row" style="padding-bottom: 10px;">
                            <h2 class="card-title" style="font-size: 1em;">Cash : 
                              <span class="">{{contribution.0}}</span>
                              <!-- <small style="color: white; font-size:100%">%</small> -->
                            </h2>
                          </div> 
                          <div class="row"> 
                          <h2 class="card-title" style="font-size: 1em;">Activity : 
                            <span class="count-number">{{cash_contribution}}</span>
                            <!-- <small style="color: white; font-size:100%">%</small> -->
                            
                          </h2>
                          </div>
                        
                    </div>
                    
                </div>
    
                
            </div>
            
            
        </div>
        
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-3">
            <div class="panel panel-bd cardbox" style="background-color: #843938;border: 1px solid #843938;">
                <div class="panel-body">
                    <div class="statistic-box">
                        <h2><span style="font-size: 20px;">$ {{total_cash|stringformat:".2f"}}</span>
                        </h2>
                    </div>
                    <div class="items pull-left">
                        <i class="fa fa-money fa-2x"></i>
                        <h4>Revenue</h4>
                    </div>
                </div>
            </div>
        </div>
    
    
    
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-3">
            <div class="panel panel-bd cardbox" style="background-color: #843938;border: 1px solid #843938;">
                <div class="panel-body">
                    <div class="statistic-box">
                        <h2><span style="font-size: 20px;">{{todays_requests}}</span>
                        </h2>
                    </div>
                    <div class="items pull-left">
                        <i class="fa fa-envelope fa-2x"></i>

                        <h4>Requests</h4>
                        <small class="pull-right" style="font-size: small">Last 24 hrs</small>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-3">
            <div class="panel panel-bd cardbox" style="background-color: #843938;border: 1px solid #843938;">
                <div class="panel-body">
                    <div class="statistic-box">
                        <h2><span style="font-size: 20px;">{{all_requests}}</span>
                        </h2>
                    </div>
                    <div class="items pull-left">
                        <i class="fa fa-envelope fa-2x"></i>
                        <h4> Total Requests</h4>
                    </div>
                </div>
            </div>
        </div>
        
    </div>


    <!-- End Of Client Stats -->



    <div class="panel panel-bd lobidrag lobipanel lobipanel-sortable" data-inner-id="nMPzTfz4dU" data-index="0">
        <div class="panel-heading ui-sortable-handle">
            <div class="btn-group"> 
                <h4>Transactions - {{client.buyer_company.name|title}}</h4> 
            </div>
        <div class="dropdown">
            <ul class="dropdown-menu dropdown-menu-right">
               
              
            </ul>
            <div class="dropdown-toggle" data-toggle="dropdown"><span class="panel-control-icon glyphicon glyphicon-cog"></span>
            </div>
            </div>
            </div>       
            <div class="panel-body">
          
                    {% if transactions %}
                    <div class="table-responsive">
                      <table id="example" class="table table-striped table-bordered" style="width:100%">
                          <thead>
                              <tr>
                              
                  <th>
                  Date
                  </th>
                  <th>
                  Time
                  </th>
                  <th>
                  Buyer
                  </th>
                  <th>
                  Quantity (Litres)
                  </th>
                  <th>
                  Revenue
                  </th>
                  <th>
                  Status
                  </th>
                              </tr>
                          </thead>
                          <tbody>
                            {% for tran in transactions %}
                     <tr>
                          <td>{{tran.date}}</td>
                          <td>{{tran.time}}</td>
                          <td>{{tran.buyer}}</td>
                          <td>{{tran.offer.request.amount}} l</td>
                          <td>$ {{tran.revenue|stringformat:".2f"}}</td>
                         <td>
                             {% if tran.is_complete %}
                             <i class="fa fa-check-circle-o" style="color: #2ecc71;"></i>
                             {% else %}
                             <i class="fa fa-times-circle-o" style="color: #e74c3c;" aria-hidden="true"></i>
                             {% endif %}
                          </td>
                          
                      </tr>
                 
                  {% endfor %}   
                          </tbody>
                          </table>
                    </div>
                    {% else %}
                    <p>No Sales Data Available</p>
                    {% endif %}
    
    
            </div>
      </div>   
    
    </section>

{%endblock%}
