{% extends "supplier/supplier_base.html" %}
{% load static %}
{% load humanize %}

{% block body %}
<!-- Content Header (Page header) -->
<section class="content-header">
    <form action="#" method="get" class="sidebar-form search-box pull-right hidden-md hidden-lg hidden-sm">
        <div class="input-group">
            <input type="text" name="q" class="form-control" placeholder="Search...">
            <span class="input-group-btn">
                <button type="submit" name="search" id="search-btn" class="btn"><i
                        class="fa fa-search"></i></button>
            </span>
        </div>
    </form>
    <!-- <div class="header-icon">
        <i class="fa fa-binoculars"></i>
    </div> -->
    <div class="header-title" style="margin-left: 0px;">
        <h1>Fuel Requests</h1>
        <small>Zimbabawe Fuel Management System</small>
        <ol class="breadcrumb hidden-xs">
            <li><a href="{%url 'fuel-request'%}"><i class="pe-7s-home"></i> Home</a></li>
            <li class="active">Requests</li>
        </ol>
    </div>
</section>

<div class="modal fade modal-success in" id="state_modal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title" style="color:whitesmoke"> Filter By Date</span>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">

                <form method="POST">
                    {% csrf_token %}
                    <div class="row report_dates" style="margin-bottom: 25px; margin-top: 25px">
                        <div class="form-group col-md-6">
                            <label for="exampleInputEmail1">Starting Date</label>
                            <input name="start_date" type="date" class="form-control"
                                id="starting_date" aria-describedby="emailHelp"
                                placeholder="Enter email" required>
                            <small id="emailHelp" class="form-text text-muted">Please Pick A Starting
                                Date.</small>
                        </div>

                        <div class="form-group col-md-6">
                            <label for="exampleInputEmail1">Ending Date</label>
                            <input name="end_date" type="date" class="form-control" id="ending_date"
                                aria-describedby="emailHelp" placeholder="Enter email" required>
                            <small id="emailHelp" class="form-text text-muted"
                                style="color: lightslategray;">Please Pick A Ending Date.</small>
                        </div>
                    </div> 
                       

                    <div class="modal-footer">  
                        <button type="submit" class="btn btn-primary ">Submit</button>
                        <button class="btn btn-default" data-dismiss="modal" >Close</button>
                    </div> 

                </form>

            </div>
        </div>
    </div>
</div>

<!-- Main content -->


<section class="content">

    <div class="content" style="min-height: 50px;">

        <!--Schedules -->
        <div class="panel panel-bd lobidrag lobipanel lobipanel-sortable" data-inner-id="nMPzTfz4dU"
             data-index="0" id="past_schedules">
            <div class="panel-heading ui-sortable-handle">

                <div class="btn-group" style="width: 100%;margin-left: 25px;"> 
                    <div class="row" style="margin-bottom: 20px;">
                        <h4>Requests</h4>
                    </div>
                    <div class="row">
                        <button data-toggle="modal" title="Pick A Date Range To Filter Records" data-target="#state_modal" class="btn btn-labeled btn-default btn-sm" style="float: left;background-color:#cfd4ce; color: #333; margin-right: 10px;">
                            <span class="btn-label"><i class="glyphicon glyphicon-filter"></i></span> Pick A Date | Showing - {% if start_date and end_date %}<b style="color: #009688;">{{start_date}} - {{end_date}}</b>{% else %}<b style="color: #009688;">All</b>{% endif %} </button>
                            <!-- <form method="POST">
                                {% csrf_token %}
                                <input type="text" name="pdf_start_date" value="{{start_date|date:"M d, Y"}}" hidden>
                                <input type="text" name="pdf_end_date" value="{{end_date|date:"M d, Y"}}" hidden>
                                <button type="submit" class="btn btn-labeled btn-default btn-sm" style="float: left; background-color:#cfd4ce; color: #333;margin-right: 10px;"
                                 {% if not acceptable_requests and not complete_requests %} disabled{% endif %} title="{% if acceptable_requests or complete_requests %} Export To PDF {%else%} No Data To Export {% endif %}">
                                    <span class="btn-label"><i class="glyphicon glyphicon-export"></i></span>PDF
                                </button>
                            </form> 
                            <form method="POST">
                                {% csrf_token %}
                                <input type="text" name="export_to_csv" value="csv" hidden>
                                <input type="text" name="csv_start_date" value="{{start_date|date:"M d, Y"}}" hidden>
                                <input type="text" name="csv_end_date" value="{{end_date|date:"M d, Y"}}" hidden>
        
                            <script>
                                var today = new Date();
                                var filename = 'Supplier Admin Allocations Summary' + ' - ' +today.toLocaleString() + '.csv'
                            </script>
                            <button  class="btn btn-labeled btn-default btn-sm" style="background-color: #cfd4ce; color: #333; margin-right: 10px;" type="submit" {% if not acceptable_requests and not complete_requests %} disabled{% endif %}
                            title="{% if acceptable_requests or complete_requests  %} Export To CSV {%else%} No Data To Export {% endif %}">
                                <span class="btn-label"><i class="glyphicon glyphicon-export"></i></span>CSV
                            </button>
                            </form> -->
                    </div>       

                </div>

                <div class="dropdown">
                    <ul class="dropdown-menu dropdown-menu-right">


                    </ul>
                    <div class="dropdown-toggle" data-toggle="dropdown"><span
                            class="panel-control-icon glyphicon glyphicon-cog"></span>
                    </div>
                </div>
            </div>
            <div class="panel-body">


                <div class="table-responsive">

                    <div class="col-xs-12 col-sm-12">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#tab1" data-toggle="tab" aria-expanded="false" style="border: rgb(211, 208, 208) 1px solid;">Incomplete</a></li>
                            <li class="" ><a href="#tab2" data-toggle="tab" aria-expanded="true" style="border: rgb(211, 208, 208) 1px solid;">Complete</a></li>                            
                        </ul>
                        <!-- Tab panels -->
                        <div class="tab-content">
                            <div class="tab-pane fade active in" id="tab1">
                                <div class="panel-body">
                                    <table id="fuel_request" class="table table-striped table-bordered" style="width:100%">
                                        <thead style="background-color: lightslategray; color:white;">
                                            <tr>
                                                <th style="color: white;">Date</th>
                                                <th style="color: white;">Time</th>
                                                <th style="color: white;">Buyer</th>
                                                <th style="color: white;">Quantity</th>
                                                <th style="color: white;">Fuel</th>
                                                <th style="color: white;">Currency</th>
                                                <th style="color: white;">Delivery</th>
                                                <th style="color: white;">Address</th>
                                                <th style="color: white;">Equipment</th>
                                                <th style="color: white;">Offer</th>
                                                <th style="color: white;">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for req in acceptable_requests %}
                                            <tr>
                                                <td>{{ req.date }}</td>
                                                <td>{{ req.time }}</td>
                                                <td>{{ req.name.company.name|lower|title }}</td>
                                                <td>{{ req.amount|floatformat:2|intcomma }}</td>
                                                
                                                {% if req.fuel_type == 'Petrol' %}
                                                    <td style="color: #009688;">{{ req.fuel_type|lower|capfirst }}</td>
                                                {% elif req.fuel_type|lower|capfirst == 'Diesel' %}
                                                    <td style="color: #ffb61e;">{{ req.fuel_type|lower|capfirst }}</td>
                                                {% else %}    
                                                    <td>{{ req.fuel_type|lower|capfirst }}</td>
                                                {% endif %}    
                            
                            
                            
                            
                                                <td>{{ req.payment_method}}</td>                    
                                                <td>{{ req.delivery_method|lower|capfirst }}</td>
                                                {% if req.delivery_address != None %}
                                                <td>{{ req.delivery_address|lower|title}}</td>  
                                                {% else %}
                                                <td>N/A</td> 
                                                {% endif %}                                 
                                                <td>{% if req.dipping_stick_required %}Stick &nbsp;{% endif %}{% if req.pump_required %}Pump &nbsp;{% endif %}{% if req.meter_required %}Meter&nbsp;{% endif %}{% if req.no_equipment %}N/A{% endif %}</td>
                                                <td>{{ req.my_offer }}</td>
                                                {% if req.my_offer != 'No Offer' %}
                                                {% if req.delivery_method == 'DELIVERY' %}
                                                <td><button type="button" class="btn btn-success btn-labeled btn-sm" data-toggle="modal"
                                                        data-target="#edit_offer_{{req.id}}">
                                                        <span class="btn-label"> <i class="fa fa-edit"></i></span> Edit Offer </button></td>
                                                {% else %}
                                                <td><button type="button" class="btn btn-labeled btn-success btn-sm" data-toggle="modal"
                                                  data-target="#edit_offer_collection_{{req.id}}">
                                                  <span class="btn-label"><i class="fa fa-edit"></i> </span> Edit Offer</button></td>
                                                  {% endif %}
                                                {% else %}
                                                {% if req.delivery_method == 'DELIVERY' %}
                                                <td><button type="button" class="btn btn-labeled btn-info btn-sm" data-toggle="modal" data-target="#add_offer_{{req.id}}">
                                                    <span class="btn-label"><i class="fa fa-handshake-o" aria-hidden="true"></i></span> Make Offer</button></td>
                                                {% else %}
                                                <td><button type="button" class="btn btn-labeled btn-info btn-sm" data-toggle="modal" data-target="#add_offer_collection_{{req.id}}">
                                                    <span class="btn-label"><i class="fa fa-handshake-o" aria-hidden="true"></i></span>Make Offer</button></td>
                                                {% endif %}
                                                {% endif %}
                                            </tr>
                                            <script>
                                                $('#pump_available').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                                $('#swipe').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                                $('#ecocash').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                                $('#cash').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                                $('#usd').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                              
                                                $('#dipping_stick_available').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                              
                                                $('#meter_available').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                              </script>
                            
                                            <!-- make offer modal -->
                            <div class="modal fade modal-success in" id="add_offer_{{req.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                            aria-hidden="true">
                            <div class="modal-dialog modal-notice">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                    <span class="modal-title">Make Offer</span>
                                </div>
                            <div class="modal-body">
                            <form method="POST" action="{% url 'supplier:supplier' req.id %}">
                                {% csrf_token %}
                                <div class=" row">
                                <div class="col-sm-6">
                                    <label>Fuel Type</label>
                                    <input type="text" name="fuel_type" class="form-control" value="{{req.fuel_type}}" disabled/>
                                </div>
                            
                                <div class="col-sm-6">
                                    <label>Fuel Quantity</label>
                                    <input type="number" min="0.1" step="0.01" name="quantity" class="form-control" value="{{req.amount}}" required/>
                                </div>
                                </div>
                                <div class=" row" style="padding-top: 20px;">
                                <div class="col-sm-6">
                                    <label>Fuel Price</label>
                                    <input type="number" min="0.1" step="0.01" name="price" class="form-control" value="{{req.price|stringformat:".2f"}}" required/>
                                </div>
                                <div class="col-sm-6">
                                  <label>Transport Fee</label>
                                  <input type="number" min="0.00" step="0.01" name="transport" class="form-control" value="0.00" />
                              </div>
                                </div>
                            </div>
                            <div class="modal-footer">  
                                <button type="submit" class="btn btn-primary ">Make Offer</button>
                                <button class="btn btn-default" data-dismiss="modal" >Close</button>
                            </div> 
                            </form>
                            </div>
                            </div>
                            </div>
                            <!-- end make offer modal -->
                            
                            
                              <!-- make offer modal with self collection-->
                              <div class="modal fade modal-success in" id="add_offer_collection_{{req.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                              aria-hidden="true">
                              <div class="modal-dialog modal-notice">
                              <div class="modal-content">
                                  <div class="modal-header">
                                      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                      <span class="modal-title">Make Offer</span>
                                  </div>
                              <div class="modal-body">
                              <form method="POST" action="{% url 'supplier:supplier' req.id %}">
                                  {% csrf_token %}
                                  <div class=" row col-sm-12">
                                  <div class="col-sm-4">
                                      <label>Fuel Type</label>
                                      <input type="text" name="fuel_type" class="form-control" value="{{req.fuel_type}}" disabled/>
                                  </div>
                              
                                  <div class="col-sm-4">
                                      <label>Fuel Quantity</label>
                                      <input type="number" min="0.1" step="0.01" name="quantity" class="form-control" value="{{req.amount}}" required/>
                                  </div>
                                  <div class="col-sm-4">
                                      <label>Fuel Price</label>
                                      <input type="number" min="0.1" step="0.01" name="price" class="form-control" value="{{req.price|stringformat:".2f"}}" required/>
                                  </div>
                                  </div>  
                                  <div class="form-group" name='choices'>                
                                      <label style="margin-left: 200px;padding-top: 20px;">Collection Address</label>
                                      <div class=" row col-sm-12">                            
                                          <div class="togglebutton col-sm-4">
                                            <label for="">Street Number</label>
                                            <input type="text" class="form-control" name="street_number" aria-describedby="helpId" placeholder="" required>
                                            
                                          </div>
                                          <div class="togglebutton col-sm-4">
                                            <label for="">Street Name</label>
                                            <input type="text" class="form-control" name="street_name" aria-describedby="helpId" placeholder="" required>
                                            
                                          </div>
                                          <div class="togglebutton col-sm-4">
                                            <label for="">Location/Town</label>
                                            <input type="text" class="form-control" name="location" aria-describedby="helpId" placeholder="" required>
                                           
                                          </div>
                                          </div>
                                      <label style="margin-left: 200px;padding-top: 20px;">Available Equipments</label>
                                      <div class="row" style="padding-left: 15px;">
                                          <div class="col-sm-4">
                                              <input class="form-control-md" type="checkbox" value="False" name="pump_available">
                                              <label for="pump_available">Pump </label>
                                              
                                          </div>
                                          <div class="col-sm-4">
                                              <input class="form-control-md" type="checkbox" value="False" name="dipping_stick_available">
                                              <label for="dipping_stick_available">Dipping Stick </label>
                                          </div>
                              
                                          <div class="col-sm-4">
                                              <input class="form-control-md" type="checkbox" value="False" name="meter_available">
                                              <label for="meter_available">Meter</label>
                                          </div>
                                      </div>
                                      </div>
                              </div>
                              <div class="modal-footer">  
                                <button type="submit" class="btn btn-primary ">Make Offer</button>
                                <button class="btn btn-default" data-dismiss="modal" >Close</button>
                            </div> 
                              </form>
                              </div>
                              </div>
                              </div>
                              <!-- end make offer modal -->
                            
                            
                            <!-- edit modal -->
                            <div class="modal fade modal-success in" id="edit_offer_{{req.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                            aria-hidden="true">
                            <div class="modal-dialog modal-notice">
                            <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                <h4 class="modal-title">Edit Offer</h4>
                            </div>
                            <div class="modal-body">
                             <form method="POST" action="{% url 'supplier:edit_offer' req.offer_id %}">
                                 {% csrf_token %}
                                 <div class=" row col-sm-12">
                                 <div class="col-sm-6">
                                     <label>Fuel Type</label>
                                     <input type="text" name="fuel_type" class="form-control" value="{{req.fuel_type}}" disabled/>
                                 </div>
                            
                                 <div class="col-sm-6">
                                     <label>Fuel Quantity</label>
                                     <input type="number" step="0.01" name="quantity" class="form-control" value="{{req.offer_quantity|floatformat:2|intcomma}}" required/>
                                 </div>
                                 </div>
                                 <div class=" row col-sm-12" style="padding-top: 20px;">
                                 <div class="col-sm-6">
                                     <label>Fuel Price</label>
                                     <input type="number" step="0.01" name="price" class="form-control" value="{{req.offer_price}}" required/>
                                 </div>
                                 <div class="col-sm-6">
                                  <label>Transport Fee</label>
                                  <input type="number" step="0.01" name="transport" class="form-control" value="{{req.transport_fee|floatformat:2|intcomma}}" required/>
                              </div>
                                 </div>
                            </div>
                            <div class=" row col-sm-12" style="padding-top: 20px;">

                            </div>
                            <div class="modal-footer">  
                                <button type="submit" class="btn btn-primary ">Update Offer</button>
                                <button class="btn btn-default" data-dismiss="modal" >Close</button>
                            </div> 
                            </form>
                            </div>
                            </div>
                            </div>
                            <!-- end edit modal -->
                            
                            
                            <!-- edit offer with self collection modal -->
                            <div class="modal fade modal-success in" id="edit_offer_collection_{{req.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                            aria-hidden="true">
                            <div class="modal-dialog modal-notice">
                            <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                <span style="color: white;">Edit Offer</span>
                            </div>
                            <div class="modal-body">
                             <form method="POST" action="{% url 'supplier:edit_offer' req.offer_id %}">
                                 {% csrf_token %}
                                 <div class=" row col-sm-12">
                                 <div class="col-sm-4">
                                     <label>Fuel Type</label>
                                     <input type="text" name="fuel_type" class="form-control" value="{{req.fuel_type}}" disabled/>
                                 </div>
                            
                                 <div class="col-sm-4">
                                     <label>Fuel Quantity</label>
                                     <input type="number" step="0.01" name="quantity" class="form-control" value="{{req.offer_quantity|floatformat:2|intcomma}}" required/>
                                 </div>
                                 <div class="col-sm-4">
                                     <label>Fuel Price</label>
                                     <input type="number" step="0.01" name="price" class="form-control" value="{{req.offer_price}}" required/>
                                 </div>
                                 </div>
                            
                                 <div class="form-group" name='choices'>
                                    <label style="margin-left: 200px;padding-top: 20px;">Collection Address</label>
                                     <div class=" row col-sm-12">                          
                                        <div class="togglebutton col-sm-4">
                                          <label for="">Street Number</label>
                                          <input type="text" class="form-control" name="street_number" aria-describedby="helpId" placeholder="" required/>
                                          
                                        </div>
                                        <div class="togglebutton col-sm-4">
                                          <label for="">Street Name</label>
                                          <input type="text" class="form-control" name="street_name" aria-describedby="helpId" placeholder="" required/>
                                          
                                        </div>
                                        <div class="togglebutton col-sm-4">
                                          <label for="">Location/Town</label>
                                          <input type="text" class="form-control" name="location" aria-describedby="helpId" placeholder="" required/>
                                        </div>
                                        </div>
                                   <label style="margin-left: 200px;padding-top: 20px;">Available Equipments</label>
                                     <div class="col-sm-12">
                                        <div class="col-sm-4">
                                            <input class="form-control-md" type="checkbox" value="False" name="pump_available">
                                            <label for="pump_available">Pump </label>
                                            
                                        </div>
                                        <div class="col-sm-4">
                                            <input class="form-control-md" type="checkbox" value="False" name="dipping_stick_available">
                                            <label for="dipping_stick_available">Dipping Stick </label>
                                        </div>
                            
                                        <div class="col-sm-4">
                                            <input class="form-control-md" type="checkbox" value="False" name="meter_available">
                                            <label for="meter_available">Meter</label>
                                        </div>
                                    </div>
                                    </div>
                                    <div class="modal-footer" style="margin-top: 60px;">  
                                        <button type="submit" class="btn btn-primary ">Update Offer</button>
                                        <button class="btn btn-default" data-dismiss="modal" >Close</button>
                                    </div> 
                            </div>
                                <!-- <p style="text-align: center;"><button type="submit" name="MakeOffer" class="btn btn-info btn-sm">Update Offer</button></p> -->
                            </form>
                            </div>
                            </div>
                            </div>
                            <!-- end edit modal -->
                                            {%endfor%}
                                        </tbody>
                                    </table>
                                    

                                    
                                </div>
                            </div>

                            <div class="tab-pane fade" id="tab2">
                                <div class="panel-body">
                                    <table id="fuel_request_complete" class="table table-striped table-bordered" style="width:100%">
                                        <thead style="background-color: lightslategray; color:white;">
                                            <tr>
                                                <th style="color: white;">Date</th>
                                                <th style="color: white;">Time</th>
                                                <th style="color: white;">Buyer</th>
                                                <th style="color: white;">Quantity</th>
                                                <th style="color: white;">Fuel</th>
                                                <th style="color: white;">Currency</th>
                                                <th style="color: white;">Delivery</th>
                                                <th style="color: white;">Address</th>
                                                <th style="color: white;">Equipment</th>
                                                <!-- <th style="color: white;">Action</th> -->
                                            </tr>
                                        </thead>
                                        <tbody>
                                        {% if complete_requests %}    
                                            {% for req in complete_requests %}
                                            <tr>
                                                <td>{{ req.date }}</td>
                                                <td>{{ req.time }}</td>
                                                <td>{{ req.name.company.name|lower|title }}</td>
                                                <td>{{ req.amount|floatformat:2|intcomma }}</td>
                                                
                                                {% if req.fuel_type == 'Petrol' %}
                                                    <td style="color: #009688;">{{ req.fuel_type|lower|capfirst }}</td>
                                                {% elif req.fuel_type|lower|capfirst == 'Diesel' %}
                                                    <td style="color: #ffb61e;">{{ req.fuel_type|lower|capfirst }}</td>
                                                {% else %}    
                                                    <td>{{ req.fuel_type|lower|capfirst }}</td>
                                                {% endif %}    
                            
                            
                            
                            
                                                <td>{{ req.payment_method}}</td>                    
                                                <td>{{ req.delivery_method|lower|capfirst }}</td>
                                                {% if req.delivery_address != None %}
                                                <td>{{ req.delivery_address|lower|title}}</td>  
                                                {% else %}
                                                <td>N/A</td> 
                                                {% endif %}                                 
                                                <td>{% if req.dipping_stick_required %}Stick &nbsp;{% endif %}{% if req.pump_required %}Pump &nbsp;{% endif %}{% if req.meter_required %}Meter&nbsp;{% endif %}{% if req.no_equipment %}N/A{% endif %}</td>
                                                {% if req.my_offer != 'No Offer' %}
                                                {% if req.delivery_method == 'DELIVERY' %}
                                                
                                                  {% endif %}
                                                {% else %}
                                                {% if req.delivery_method == 'DELIVERY' %}
                                                {% else %}
                                                {% endif %}
                                                {% endif %}
                                            </tr>
                                            <script>
                                                $('#pump_available').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                                $('#swipe').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                                $('#ecocash').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                                $('#cash').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                                $('#usd').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                              
                                                $('#dipping_stick_available').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                              
                                                $('#meter_available').on('change', function () {
                                                  $(this).val(this.checked ? "True" : "False");
                                                });
                                              </script>
                            
                                            <!-- make offer modal -->
                                                    <!-- <div class="modal fade modal-success in" id="add_offer_{{req.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                                                    aria-hidden="true">
                                                <div class="modal-dialog modal-notice">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                                        <span class="modal-title">Make Offer</span>
                                                    </div>
                                                <div class="modal-body">
                                                <form method="POST" action="{% url 'supplier:supplier' req.id %}">
                                                    {% csrf_token %}
                                                    <div class=" row">
                                                    <div class="col-sm-6">
                                                        <label>Fuel Type</label>
                                                        <input type="text" name="fuel_type" class="form-control" value="{{req.fuel_type}}" disabled/>
                                                    </div>
                            
                                                    <div class="col-sm-6">
                                                        <label>Fuel Quantity</label>
                                                        <input type="number" step="0.01" name="quantity" class="form-control" value="{{req.amount}}" required/>
                                                    </div>
                                                    </div>
                                                    <div class=" row">
                                                    <div class="col-sm-6">
                                                        <label>Fuel Price</label>
                                                        <input type="number" step="0.01" name="price" class="form-control" value="{{req.price|stringformat:".2f"}}" required/>
                                                    </div>
                                                    <div class="col-sm-6">
                                                    <label>Transport Fee</label>
                                                    <input type="number" step="0.01" name="transport" class="form-control" value="0.00" />
                                                </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">  
                                                    <button type="submit" class="btn btn-primary ">Make Offer</button>
                                                    <button class="btn btn-default" data-dismiss="modal" >Close</button>
                                                </div> 
                                                </form>
                                                </div>
                                                </div>
                                                </div> -->
                                                <!-- end make offer modal -->
                            
                            
                                                <!-- make offer modal with self collection-->
                                                <div class="modal fade modal-success in" id="add_offer_collection_{{req.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                                                aria-hidden="true">
                                                <div class="modal-dialog modal-notice">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                                        <span class="modal-title">Make Offer</span>
                                                    </div>
                                                <div class="modal-body">
                                                <form method="POST" action="{% url 'supplier:supplier' req.id %}">
                                                    {% csrf_token %}
                                                    <div class=" row col-sm-12">
                                                    <div class="col-sm-4">
                                                        <label>Fuel Type</label>
                                                        <input type="text" name="fuel_type" class="form-control" value="{{req.fuel_type}}" disabled/>
                                                    </div>
                                                
                                                    <div class="col-sm-4">
                                                        <label>Fuel Quantity</label>
                                                        <input type="number" min="0.1" step="0.01" name="quantity" class="form-control" value="{{req.amount|floatformat:2|intcomma}}" required/>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label>Fuel Price</label>
                                                        <input type="number" min="0.1" step="0.01" name="price" class="form-control" value="{{req.price}}" required/>
                                                    </div>
                                                    </div>  
                                                    <div class="form-group" name='choices'>                
                                                        <p style="text-align: center;"><label>Collection Address</label></p>
                                                        <div class=" row col-sm-12">                            
                                                            <div class="togglebutton col-sm-4">
                                                                <label for="">Street Number</label>
                                                                <input type="text" class="form-control" name="street_number" aria-describedby="helpId" placeholder="" required>
                                                                
                                                            </div>
                                                            <div class="togglebutton col-sm-4">
                                                                <label for="">Street Name</label>
                                                                <input type="text" class="form-control" name="street_name" aria-describedby="helpId" placeholder="" required>
                                                                
                                                            </div>
                                                            <div class="togglebutton col-sm-4">
                                                                <label for="">Location/Town</label>
                                                                <input type="text" class="form-control" name="location" aria-describedby="helpId" placeholder="" required>
                                                            
                                                            </div>
                                                            </div>
                                                        <p style="text-align: center;"><label>Available Equipments</label></p>
                                                        <div class="row" style="padding-left: 15px;">
                                                            <div class="col-sm-4">
                                                                <input class="form-control-md" type="checkbox" value="False" name="pump_available">
                                                                <label for="pump_available">Pump </label>
                                                                
                                                            </div>
                                                            <div class="col-sm-4">
                                                                <input class="form-control-md" type="checkbox" value="False" name="dipping_stick_available">
                                                                <label for="dipping_stick_available">Dipping Stick </label>
                                                            </div>
                                                
                                                            <div class="col-sm-4">
                                                                <input class="form-control-md" type="checkbox" value="False" name="meter_available">
                                                                <label for="meter_available">Meter</label>
                                                            </div>
                                                        </div>
                                                        </div>
                                                </div>
                                                <div class="modal-footer">  
                                                    <button type="submit" class="btn btn-primary ">Make Offer</button>
                                                    <button class="btn btn-default" data-dismiss="modal" >Close</button>
                                                </div> 
                                                </form>
                                                </div>
                                                </div>
                                                </div>
                                                <!-- end make offer modal -->
                            
                            
                                                <!-- edit modal -->
                                                <div class="modal fade modal-success in" id="edit_offer_{{req.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                                                aria-hidden="true">
                                                <div class="modal-dialog modal-notice">
                                                <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                                    <span style="color: white;">Edit Offer</span>
                                                </div>
                                                <div class="modal-body">
                                                <form method="POST" action="#">
                                                    {% csrf_token %}
                                                    <div class=" row col-sm-12">
                                                    <div class="col-sm-6">
                                                        <label>Fuel Type</label>
                                                        <input type="text" name="fuel_type" class="form-control" value="{{req.fuel_type}}" disabled/>
                                                    </div>
                            
                                                    <div class="col-sm-6">
                                                        <label>Fuel Quantity</label>
                                                        <input type="number" min="0.1" step="0.01" name="quantity" class="form-control" value="{{req.offer_quantity|floatformat:2|intcomma}}" required/>
                                                    </div>
                                                    </div>
                                                    <div class=" row col-sm-12">
                                                    <div class="col-sm-6">
                                                        <label>Fuel Price</label>
                                                        <input type="number" min="0.1" step="0.01" name="price" class="form-control" value="{{req.offer_price}}" required/>
                                                    </div>
                                                    <div class="col-sm-6">
                                                    <label>Transport Fee</label>
                                                    <input type="number" min="0.1" step="0.01" name="transport" class="form-control" value="{{req.transport_fee|floatformat:2|intcomma}}" required/>
                                                </div>
                                                    </div>
                                                    <div class="modal-footer" style="margin-top: 60px;">  
                                                        <button type="submit" class="btn btn-primary ">Update Offer</button>
                                                        <button class="btn btn-default" data-dismiss="modal" >Close</button>
                                                    </div> 
                                                </div>
                                                    <!-- <p style="text-align: center;"><button type="submit" name="MakeOffer" class="btn btn-info btn-sm">Update Offer</button></p> -->
                                                </form>
                                                </div>
                                                </div>
                                                </div>
                                                <!-- end edit modal -->
                            
                            
                                                <!-- edit offer with self collection modal -->
                                                <div class="modal fade modal-success in" id="edit_offer_collection_{{req.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                                                aria-hidden="true">
                                                <div class="modal-dialog modal-notice">
                                                <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                                    <h2 class="modal-title">Edit Offer</h2>
                                                </div>
                                                <div class="modal-body">
                                                <form method="POST" action="#">
                                                    {% csrf_token %}
                                                    <div class=" row col-sm-12">
                                                    <div class="col-sm-4">
                                                        <label>Fuel Type</label>
                                                        <input type="text" name="fuel_type" class="form-control" value="{{req.fuel_type}}" disabled/>
                                                    </div>
                            
                                                    <div class="col-sm-4">
                                                        <label>Fuel Quantity</label>
                                                        <input type="number" min="0.1" step="0.01" name="quantity" class="form-control" value="{{req.offer_quantity|floatformat:2|intcomma}}" required/>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <label>Fuel Price</label>
                                                        <input type="number" min="0.1" step="0.01" name="price" class="form-control" value="{{req.offer_price}}" required/>
                                                    </div>
                                                    </div>
                            
                                                    <div class="form-group" name='choices'>
                                                        <p style="text-align: center;"><label>Collection Address</label></p>
                                                        <div class=" row col-sm-12">                          
                                                            <div class="togglebutton col-sm-4">
                                                            <label for="">Street Number</label>
                                                            <input type="text" class="form-control" name="street_number" aria-describedby="helpId" placeholder="" required/>
                                                            
                                                            </div>
                                                            <div class="togglebutton col-sm-4">
                                                            <label for="">Street Name</label>
                                                            <input type="text" class="form-control" name="street_name" aria-describedby="helpId" placeholder="" required/>
                                                            
                                                            </div>
                                                            <div class="togglebutton col-sm-4">
                                                            <label for="">Location/Town</label>
                                                            <input type="text" class="form-control" name="location" aria-describedby="helpId" placeholder="" required/>
                                                            </div>
                                                            </div>
                                                        <p style="text-align: center;"><label>Available Equipments</label></p>
                                                        <div class="col-sm-12">
                                                            <div class="col-sm-4">
                                                                <input class="form-control-md" type="checkbox" value="False" name="pump_available">
                                                                <label for="pump_available">Pump </label>
                                                                
                                                            </div>
                                                            <div class="col-sm-4">
                                                                <input class="form-control-md" type="checkbox" value="False" name="dipping_stick_available">
                                                                <label for="dipping_stick_available">Dipping Stick </label>
                                                            </div>
                            
                                                            <div class="col-sm-4">
                                                                <input class="form-control-md" type="checkbox" value="False" name="meter_available">
                                                                <label for="meter_available">Meter</label>
                                                            </div>
                                                        </div>
                                                        </div>
                                                        <div class="modal-footer" style="margin-top: 60px;">  
                                                            <button type="submit" class="btn btn-primary "> Update Offer</button>
                                                            <button class="btn btn-default" data-dismiss="modal" >Close</button>
                                                        </div> 
                                            </div>
                                                <!-- <p style="text-align: center;"><button type="submit" name="MakeOffer" class="btn btn-info btn-sm">Update Offer</button></p> -->
                                            </form>
                                            </div>
                                            </div>
                                            </div>
                                            <!-- end edit modal -->
                                            <script>
                                                $('body').click(function (event) {
                                                    if(!$(event.target).closest('#add_offer_{{req.id}}').length && !$(event.target).is('#add_offer_{{req.id}}')) {
                                                        $("#add_offer_{{req.id}}").modal('hide');
                                                    }
                                                    if(!$(event.target).closest('#add_offer_collection_{{req.id}}').length && !$(event.target).is('#add_offer_collection_{{req.id}}')) {
                                                        $("#add_offer_collection_{{req.id}}").modal('hide');
                                                    }
                                                     
                                                });
                                            </script>
                                            {%endfor%}
                                        {% else %}    
                                        <!-- No Data To Show -->
                                        {% endif %}
                                        </tbody>
                                    </table>
                                    
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>

                </div>


            </div>


        </div>

    </div>
</section>

<script>
    $('body').click(function (event) {
        if(!$(event.target).closest('#state_modal').length && !$(event.target).is('#state_modal')) {
            $("#state_modal").modal('hide');
        }    
            
    });
</script>


{%endblock%}